<html>
    <head></head>
    <body>
        <h1>Task: Multiple search results with check on delay</h1>
        <hr>
        <input type="checkbox" id="box" name="Search" value="Search" onclick="provoked()"> 
        <label><b>Search Query</b></label>
        <hr>
        <label for="param">Want results with ID less than?</label>
        <input type="text" id="param" name="param"><br><br>
        <hr>
        <hr>
        <textarea rows="60" cols="160" id="searchResponse" style="max-height:400px; min-height:300px; resize: none"></textarea>
    </body>
    <script src="https://cdn.socket.io/3.1.3/socket.io.min.js" integrity="sha384-cPwlPLvBTa3sKAgddT6krw0cJat7egBga3DJepJyrLl4Q9/5WLra3rrnMcyTyOnh" crossorigin="anonymous"></script>
    <script>
        const socket = io("http://localhost:3000");
        socket.on("connect",()=>{
            console.log("client connected")
        })
        const query = document.getElementById('param');
        const display_res = document.querySelector('#searchResponse')

        function showResponse(content) {
            display_res.textContent += `\n\n${content}`;
            display_res.scrollTop = display_res.scrollHeight;
        }

        function provoked(){
            socket.emit('find_search',query.value)
        }

        socket.on("results1", (data)=>{
            socket.on('done',()=>{
                showResponse(data)
            })
            }
        )
        socket.on("results2", (data)=>{
            socket.on('done',()=>{
                showResponse(data)
            })
            }
        )
         socket.on("results3", (data)=>{
            socket.on('done',()=>{
                showResponse(data)
            })
            }
        )
    </script>
</html>
